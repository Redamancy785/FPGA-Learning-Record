
#include"COMMON.h"

int main(void)
{


	//GIC 通用中断控制器初始化
	ScuGic_Init();

	//初始化 PS 端 GPIO
	PS_GPIO_Init();

	//设置 PS_KEY(MIO47)方向为输入
	PS_GPIO_SetMode(PS_KEY, INPUT, 1);
	//设置 PS_LED(MIO7)方向为输出
	PS_GPIO_SetMode(PS_LED, OUTPUT, 0);

	//初始化 PS GPIO 中断
	PS_GPIO_Int_Init(PS_GPIO_IRQ_Handler);

	//启用PS_KEY的中断功能
	PS_GPIO_SetInt(PS_KEY,XGPIOPS_IRQ_TYPE_EDGE_RISING);

	uint8_t flag;

    while(1){
    	if(flag > 0){
    		flag--;
    		PS_GPIO_SetPort(PS_LED, 1);
    		usleep(500000);
    		PS_GPIO_SetPort(PS_LED, 0);
    		usleep(500000);
    	}
    };
    return 0;
}







